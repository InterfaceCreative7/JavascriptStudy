# 1.데이터 타입

## 기본형 데이터와 참조형 데이터

### 변수 복사 비교

```js
//기본형
var a = 10;
var b = a;

//참조형
var obj = {c: 10, d : 'aaa'}
var cpy = obj;
```

둘 다 복사할 대상의 데이터 주소를 받는다. 다만 복사한 이후 값을 수정할 때 차이가 있는데, b=13;의 경우 새로운 데이터 주소값을 할당받지만, cpy.c = 13의 경우에는 데이터 주소가 바뀌지 않고, 같은 객체를 바라본다. 즉, obj.c의 값도 바뀌는 것이다. 다만 cpy = {e: 13, f:'fff'}와 같이 객체 자체를 바꾸어줄 경우, 데이터 주소가 바뀌게 된다.

> 중요한 것은, 값을 복사한다고 알고있던 기본형은 사실 참조형과 같이 주소값을 참조한다는 것이다.

## 불변 객체

### 불변 객체를 만드는 간단한 방법

아이디어: 객체의 내부 프로퍼티를 바꿀때마다 새로운 객체를 만들어 초기화한다면(cpy = {e: 13, f:'fff'};), 참조형 변수 또한 불변 객체처럼 사용할 수 있지 않을까?

활용: 정보가 바뀐 시점에 알림을 보내거나, 정보의 차이를 보여주어야 되는 경우. 기존 객체의 프로퍼티를 바꾸어 반환하는게 아니라, 관련 함수에서 새로 초기화된 객체를 반환함.

위의 활용 방안을 모든 개발자들이 지킨다면, 해당 객체는 불변 객체로 간주할 수 있음. 그러나 시스템적 제약을 거는 방식(immutable.js, baobap.js)등 활용하는 것이 훨신 안전하고 신뢰도도 높음.

### 얕은 복사와 깊은 복사

위의 예시는 상관 없지만

```js
var obj = {
    a = 1,
    b = {
        c = 1,
        d = 'fff'
    }
}
```

와 같은 객체를 생각해 보자. 이 경우, 단순히 obj 내부의 객체의 데이터를 복사해오는것으로는 충분하지 않다. 왜냐하면 b 또한 객체이기 때문에 여전히 같은 객체를 바라보는 상태이다. cpy.b.c = 2; 의 경우, cpy와 obj의 b.c의 값은 2로 바뀌게 된다.

이런 경우에는 바로 아래 단계만 복사가 되었으므로 , 얕은 복사가 이루어졌다고 한다. 그리고 깊은 복사를 위해서는 객체 내부에 또 객체가 있는 경우에는 재귀적으로 데이터를 복사해 완전히 불변 객체로 만들어 주어야 한다.

> typeof 명령어의 경우, null에 대해서도 object를 반환하기 때문에 별도처리를 해야 한다.

그리고 또 다른 방법으로는, 객체를 JSON 문법으로 표현된 문자열로 바꾼 뒤, 다시 JSON객체로 바꾸어 주는 방법이 있다.

> 코드의 경우는 이해가 잘 되지 않는다...

## undefined와 null

undefined

1. 값을 대입하지 않은, 즉 데이터 영역의 메모리 주소가 할당되지 않은 식별자에 접근할 때, 다만 배열에 대해서는, 사용자가 따로 지정하지 않았다는  의미의 empty가 출력된다.

2. 객체 내부의 존재하지 않는 프로퍼티에 접근하려고 할 때

3. return 문이 없거나 호출되지 않는 함수의 실행 결과

4. empty의 경우, 배열을 순회하는 다양한 메소드에서 무시됨.

> 배열은 선언할 때 미리 공간을 확보하는게 아닌, 인덱스에 값이 지정될 때 공간을 확보한다. 즉, empty는 할당된 공간이 없음을, 아직 지정되지 않은 프로퍼티라는 의미이다.

사용자가 지정한 undefined는 실존하는 값으로써의 undefined이지만, 시스템이 지정한 undefined는 "값이 없는 상태"를 의미한다.

전자와 후자를 같이 쓰는 것은 혼란스러우므로, 대부분의 경우에서 undefined를 사용하지 않는 것을 추천한다. 전자의 경우에서 사용하라고 null을 만들었다!
ex

```js
var a;
var b = {c:1;};

console.log(a) //1번 경우
console.log(b.d) //2번 경우
e = function (){ };
console.log(e) //3번 경우
```

null은 typeof 명령어에서 object로 반환되기 때문에, 해당 변수가 null인지를 확인하는 방법은

1. == null

2. == undefined

3. === null

이 있다. 다만 1번과 2번의 경우 null과 undefined를 구분할 수 없기 때문에 3번에서 일치 연산자를 써서 확인해야 한다.

## 정리

1. 기본형 & 참조형. 기본형 = 불변, 참조형 = 가변.

2. 변수 = 공간, 식별자 = 이름

3. 변수는 식별자 공간과 데이터 공간 구분. 식별자 공간 선언시 자동적으로 undefined를 할당. 이후 값이 들어오면 데이터 공간에 저장하고, 그 주소를 변수의 값 영역에 할당.

4. 참조형의 경우 변수 그룹이기 때문에 가변형으로 여겨야 함. 그러나 불변형으로 여겨야 하는 경우, 내부 프로퍼티를 일일히 복사해야함.(깊은 복사) or 라이브러리 사용.

5. undefined : 변수에 별다른 값이 지정되지 않았다는 것을 의미 사용자가 직접 지정하는것은 지양.

6. null : 사용자가 직접 "비어있는 값"임을 명시함.
